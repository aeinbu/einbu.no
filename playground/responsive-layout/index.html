<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Responsive layout</title>
	<link rel="stylesheet" href="layout.css">
</head>

<body>
	<header>
		<h1>Responsive layout playground</h1>
	</header>
	<nav class="nav-menu">
		<button class="nav-toggle" aria-label="Toggle navigation">☰ Menu</button>
		<ul class="nav-list">

			<li>
				<a href="#">Archive</a>
			</li>

			<li>
				<a href="#">Documents and media</a>
			</li>

			<li class="has-submenu">
				<button class="submenu-toggle">External <span class="arrow">▶</span></button>
				<ul class="submenu">
					<li><a href="#">my.name@example.com</a></li>
					<li><a href="#">other.email@example.com</a></li>
					<li><a href="#">Dropbox (my.name@example.com)</a></li>
					<li><a href="#">Manage external sources</a></li>
				</ul>
			</li>

			<li>
				<a href="#">Item three</a>
			</li>

			<li class="has-submenu">
				<button class="submenu-toggle">Profile<span class="arrow">▶</span></button>
				<ul class="submenu">
					<li><a href="#">My profile</a></li>
					<li><a href="#">Preferences</a></li>
				</ul>
			</li>

		</ul>
	</nav>
	<div class="content-wrapper">
		<main>
			<p>This is a playground for responsive layout techniques.</p>
			<p>Resize your browser window to see the navigation change from a sidebar to a dropdown menu.</p>
		</main>
	</div>
	<footer>
		<p>Footer</p>
	</footer>
	<script>
		const navToggle = document.querySelector('.nav-toggle');
		const navList = document.querySelector('.nav-list');
		const navMenu = document.querySelector('.nav-menu');
		
		navToggle.addEventListener('click', (e) => {
			e.stopPropagation();
			navList.classList.toggle('active');
		});

		// Close menu when clicking outside
		document.addEventListener('click', (e) => {
			if (!navMenu.contains(e.target) && navList.classList.contains('active')) {
				navList.classList.remove('active');
			}
		});

		// Close menu when clicking a link
		navList.querySelectorAll('a').forEach(link => {
			link.addEventListener('click', () => {
				navList.classList.remove('active');
			});
		});

		// Close all submenus when any top-level item is clicked
		document.querySelectorAll('.nav-list > li').forEach(li => {
			li.addEventListener('click', (e) => {
				// Only if clicking on the direct child (not bubbling from submenu)
				if (e.target.closest('li') === li) {
					document.querySelectorAll('.has-submenu.open').forEach(item => {
						if (item !== li) {
							item.classList.remove('open');
							const arrow = item.querySelector('.arrow');
							if (arrow) arrow.style.transform = 'rotate(0deg)';
						}
					});
				}
			});
		});

		// Handle submenu toggles
		document.querySelectorAll('.submenu-toggle').forEach(toggle => {
			toggle.addEventListener('click', (e) => {
				e.stopPropagation();
				const parent = toggle.parentElement;
				const isCurrentlyOpen = parent.classList.contains('open');
				
				// Close all open submenus
				document.querySelectorAll('.has-submenu.open').forEach(item => {
					item.classList.remove('open');
					const otherArrow = item.querySelector('.arrow');
					if (otherArrow) otherArrow.style.transform = 'rotate(0deg)';
				});
				
				// If the clicked submenu wasn't open, open it
				if (!isCurrentlyOpen) {
					parent.classList.add('open');
					const arrow = toggle.querySelector('.arrow');
					arrow.style.transform = 'rotate(90deg)';
				}
			});
		});

		// Close submenus when clicking outside
		document.addEventListener('click', (e) => {
			if (!e.target.closest('.nav-menu')) {
				document.querySelectorAll('.has-submenu.open').forEach(item => {
					item.classList.remove('open');
					const arrow = item.querySelector('.arrow');
					if (arrow) arrow.style.transform = 'rotate(0deg)';
				});
			}
		});
	</script>
</body>

</html>